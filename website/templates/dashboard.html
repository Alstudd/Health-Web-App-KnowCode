<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
		crossorigin="anonymous" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->

	<link rel="stylesheet" href="static/css/base.css">
	<!-- <link rel="stylesheet" href="static/css/fill_details.css"> -->
	<!-- <link rel="stylesheet" href="static/css/style.css"> -->
	<link rel="stylesheet" href="static/css/chatbot.css">
	<link rel="stylesheet" href="static/css/emergency_popup.css">
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<link rel="icon" href="{{url_for('static', filename='images/SwasthLogo.png')}}">
	<!-- My CSS -->
	<link rel="stylesheet" href="static/css/dashboard.css">

	<title>Dashboard</title>
</head>

<body>
	<!-- SIDEBAR -->
	<section id="sidebar">
		<a style="text-decoration: none;" href="#" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">Swasth</span>
		</a>
		<ul class="side-menu p-0 top">
			<li>
				<a style="text-decoration: none;" href="/">
					<i class='bx bxs-home-alt-2'></i>
					<span class="text">Home</span>
				</a>
			</li>
			<li>
				<a style="text-decoration: none;" href="/fill_details">
					<i class='bx bxs-detail'></i>
					<span class="text">Profile Details</span>
				</a>
			</li>
			<li>
				<a style="text-decoration: none;" href="/appoint">
					<i class='bx bxs-calendar'></i>
					<span class="text">Appointments</span>
				</a>
			</li>
			<li class="active">
				<a style="text-decoration: none;" href="/dashboard">
					<i class='bx bxs-dashboard'></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a style="text-decoration: none;" href="/storage">
					<i class='bx bxs-file'></i>
					<span class="text">File Storage</span>
				</a>
			</li>
			<li>
                <a style="text-decoration: none;" href="/healthcareBot">
                    <i class='bx bxs-message-rounded-detail'></i>
                    <span class="text">HealthCare Bot</span>
                </a>
            </li>
			<li>
                <a style="text-decoration: none;" href="/insurance">
                    <i class='bx bxs-shield-plus'></i>
                    <span class="text">Insurance</span>
                </a>
            </li>
			<li>
				<a style="text-decoration: none;" href="/meditate">
					<i class='bx bxs-objects-horizontal-left'></i>
					<span class="text">Meditation</span>
				</a>
			</li>
			<li>
				<a style="text-decoration: none;" href="/lobby" target="_blank">
					<i class='bx bxs-message-dots'></i>
					<span class="text">VideoChat</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu p-0">
			<li>
				<a style="text-decoration: none;" href="/about">
					<i class='bx bxs-user-detail'></i>
					<span class="text">About Us</span>
				</a>
			</li>
			<li>
				<a style="text-decoration: none;" href="/logout" class="logout">
					<i class='bx bxs-log-out-circle'></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu'></i>
			<a href="/note" class="nav-link">Notes</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell'></i>
				<span class="num">0</span>
			</a>
			<a style="text-decoration: none;" href="#" class="profile">
                <img src="static/profile_pics/{{user.username}}.{{user.filetype}}" onclick="toggleMenu()">
                <div class="sub-menu-wrap" id="subMenu">
                    <div class="sub-menu">
                        <div class="user-info">
                            <img class="p-0 mr-2" src="static/profile_pics/{{user.username}}.{{user.filetype}}">
                            <h5 class="px-2 py-1">{{user.username}}</h5>
                        </div>
                        <hr>
                        <a href="/fill_details" class="sub-menu-link" style="text-decoration: none;">
                            <i class="fa-solid fa-user"></i>
                            <p>Edit Profile</p>
                            <span>></span>
                        </a>
                        <a href="/dashboard" class="sub-menu-link" style="text-decoration: none;">
                            <i class="fa-solid fa-gear"></i>
                            <p>Dashboard</p>
                            <span>></span>
                        </a>
                        <a href="/fill_details" class="sub-menu-link" style="text-decoration: none;">
                            <i class="fa-solid fa-file-lines"></i>
                            <p>Fill Your Details</p>
                            <span>></span>
                        </a>
                        <a href="/logout" class="sub-menu-link" style="text-decoration: none;">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            <p>Logout</p>
                            <span>></span>
                        </a>
                    </div>
                </div>
            </a>
		</nav>
		<!-- NAVBAR -->

		<!-- {% with messages = get_flashed_messages(with_categories=true) %}
	{% if messages %}
	{% for category, message in messages %}
	{% if category == 'error' %}
	<div class="alert alert-danger alter-dismissable fade show" role="alert">
		{{ message }}
		<button type="button" class="close" data-dismiss="alert">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	{% else %}
	<div class="alert alert-success alter-dismissable fade show" role="alert">
		{{ message }}
		<button type="button" class="close" data-dismiss="alert">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	{% endif %}
	{% endfor %}
	{% endif %}
	{% endwith %} -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Dashboard</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right'></i></li>
						<li>
							<a style="text-decoration: none;" class="active" href="/">Home</a>
						</li>
					</ul>
				</div>
				<a onclick="printPage()" style="text-decoration: none;" class="btn-download">
					<i class='bx bxs-cloud-download'></i>
					<span class="text">Download PDF</span>
				</a>
			</div>

			<ul class="box-info">
				<li>
					<i class='bx bxs-group'></i>
					<span class="text">
						<h3>{{user.username}}</h3>
						<p>Username</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-calendar-check'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.age %}
						<h3>{{up.age}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Age</p>
					</span>
				</li>
				<li>
					<i class='bx bx-male-female'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.gender %}
						<h3>{{up.gender}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Gender</p>
					</span>
				</li>
			</ul>

			<ul class="box-info">
				<li>
					<i class='bx bx-body'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.weight %}
						<h3>{{up.weight}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Weight</p>
					</span>
				</li>
				<li>
					<i class='bx bx-body'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.height %}
						<h3>{{up.height}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Height</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-user-detail'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.weight and up.height %}
						<h3>{{up.weight/((up.height/100)*(up.height/100))}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>BMI</p>
					</span>
				</li>
			</ul>
			<ul class="box-info">
				<li>
					<i class='bx bxs-donate-blood'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.blood_grp %}
						<h3>{{up.blood_grp}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Blood Group</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-donate-heart'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.heart_attack == 0 or up.heart_attack %}
						<h3>{{up.heart_attack}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>No. Of Heart Attacks</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-building-house'></i>
					<span class="text">
						{% if user.uploads %}
						{% for up in user.uploads %}
						{% if up.region %}
						<h3>{{up.region}}</h3>
						{% else %}

						<h3>No Value</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Region</p>
					</span>
				</li>
			</ul>

			<ul class="box-info">
				<li>
					<i class='bx bxs-shield-plus'></i>
					<span class="text">
						{% if user.diabetes %}
						{% for diab in user.diabetes %}
						{% if diab.pred_diabetes[0] == 1 %}
						<h3>Predicted Yes</h3>
						{% else %}

						<h3>Predicted No</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Diabetes Prediction</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-heart-circle'></i>
					<span class="text">
						{% if user.hearts %}
						{% for ht in user.hearts %}
						{% if ht.pred_heart[0] == 1 %}
						<h3>Predicted Yes</h3>
						{% else %}

						<h3>Predicted No</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Heart Disease Prediction</p>
					</span>
				</li>
				<li>
					<i class='bx bx-plus-medical'></i>
					<span class="text">
						{% if user.parkinsons %}
						{% for par in user.parkinsons %}
						{% if par.pred_park[0] == 1 %}
						<h3>Predicted Yes</h3>
						{% else %}

						<h3>Predicted No</h3>
						{% endif %}
						{% endfor %}
						{% else %}
						<h3>No Value</h3>
						{% endif %}
						<p>Parkinson Prediction</p>
					</span>
				</li>
			</ul>
			<br>
			<div class="table-data">
				<div class="order">
					<div class="head">
						<h3 style="padding-left: 13px;">Your Appointments</h3>
						<i class='bx bx-search'></i>
						<i class='bx bx-filter'></i>
					</div>
					{% if user.appoints|length == 0 %}
					<br>
					<div style="text-align: center;" class="alert alert-primary" role="alert">
						No Appointments found. Add your first Appointment with doctor now!
					</div>
					{% else %}
					<table>
						<thead>
							<tr>
								<th style="padding-left: 13px;">SNo</th>
								<th>Title</th>
								<th>Date</th>
								<th>Time</th>
								<th>VideoChat</th>
							</tr>
						</thead>
						<tbody>
							{% for appointed in user.appoints %}
							<tr>
								<td>
									<span class="circle" style="background-color: #FD7238;">{{loop.index}}</span>
								</td>
								<td>
									{{appointed.t}}
								</td>
								<td>{{appointed.d}}</td>
								<td>{{appointed.time}}</td>
								<td><a href="/lobby" target="_blank" style="text-decoration: none;"><span
											class="status pending">Start</span></a></td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% endif %}
				</div>
				<ul class="box-info" style="padding-bottom: 40px;">
					<li>
						<i class='bx bxs-group' ></i>
						<span class="text">
							<h3>{{user.unique}}</h3>
							<p>Swasth Unique Code</p>
						</span>
					</li>
				</ul>
			</div>
			<div class="table-data">
				<div class="todo">
					<div class="head">
						<h3>Doctor's Prescriptions</h3>
						<i class='bx bx-plus'></i>
						<i class='bx bx-filter'></i>
					</div>
					<ul class="todo-list">
						{% if user.todos %}
						{% for todo in user.todos %}
						<li class="completed">
							<p>{{todo.title}}</p>
							<i id="pop" class='bx bx-dots-vertical-rounded'></i>
							<div class="popup">
								<button id="close">&times;</button>
								<h2 style="color: black!important;">Medicine Intake</h2>
								<br>
								<a style="padding: 10px 10px;">{{todo.desc}}</a>
							</div>
						</li>
						{% endfor %}
						{% else %}
						<li class="not-completed">
							<p>No Prescriptions Given!</p>
						</li>
						{% endif %}
					</ul>
				</div>
				<div class="order">
					<div class="head">
						<h3 style="padding-left: 13px;">File Storage</h3>
						<i class='bx bx-search'></i>
						<i class='bx bx-filter'></i>
					</div>
					{% if user.storage|length == 0 %}
					<br>
					<div style="text-align: center;" class="alert alert-primary" role="alert">
						No Files found. Store your health record files now!
					</div>
					{% else %}
					<table>
						<thead>
							<tr>
								<th style="padding-left: 13px;">SNo</th>
								<th>FileName</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							{% for stor in user.storage %}
							<tr>
								<td>
									<span class="circle" style="background-color: #3C91E6;">{{loop.index}}</span>
								</td>
								<td>
									{{stor.my_file}}
								</td>
								<td><a href="static/storage/{{user.username}}/{{stor.my_file}}" style="text-decoration: none;" download><span
									class="status process">Download</span></a></td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% endif %}
				</div>
				<div class="order">
					<div class="head">
						<h3 style="padding-left: 13px;">Insurance Policies</h3>
						<i class='bx bx-search'></i>
						<i class='bx bx-filter'></i>
					</div>
					{% if user.insurance|length == 0 %}
					<br>
					<div style="text-align: center;" class="alert alert-primary" role="alert">
						No Files found. Store your health insurance policies now!
					</div>
					{% else %}
					<table>
						<thead>
							<tr>
								<th style="padding-left: 13px;">SNo</th>
								<th>FileName</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							{% for stor in user.insurance %}
							<tr>
								<td>
									<span class="circle" style="background-color: #3C91E6;">{{loop.index}}</span>
								</td>
								<td>
									{{stor.my_file}}
								</td>
								<td><a href="static/insurance/{{user.username}}/{{stor.my_file}}" style="text-decoration: none;" download><span
									class="status process">Download</span></a></td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					{% endif %}
				</div>
			</div>
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->

	<div class="my_container">
		<div class="chatbox">
			<div class="chatbox_support">
				<div class="chatbox_header">
					<div class="chatbox_image--header">
						<img src="https://images.squarespace-cdn.com/content/v1/598c1a6b46c3c4a7b18a8908/f3c4acee-fe02-442b-b1e5-bcf2eabd6c34/Chatbot_Icon.png"
							alt="image" width="100px" height="100px">
					</div>
					<div class="chatbox_content--header">
						<h4 class="chatbox_heading--header">Chat Support</h4>
						<p class="chatbox_description--header">Hi, I'm Swasth-ChatBot. <br>How can I help you?
						</p>
					</div>
				</div>
				<div id="chatbot-conversation" class="chatbox_messages">
					<div></div>
				</div>
				<div class="chatbox_footer">
					<input id="chatbot-input" type="text" placeholder="Write a message...">
					<button id="chatbot-submit" class="chatbox_send--footer send_button">Send</button>
				</div>
			</div>
			<div class="chatbox_button">
				<button><img
						src="https://images.squarespace-cdn.com/content/v1/598c1a6b46c3c4a7b18a8908/f3c4acee-fe02-442b-b1e5-bcf2eabd6c34/Chatbot_Icon.png"
						alt="image" width="50px" height="50px"></button>
			</div>
		</div>
	</div>
	<script>
		$SCRIPT_ROOT = '{{ request.script_root|tojson }}';
	</script>
	<script type="text/javascript" src="static/js/chatbot.js"></script>

	<script src="static/js/dashboard.js"></script>

	<script>
        function printPage() {
            window.print();
        }
    </script>

	<script>
		document.getElementById('pop').addEventListener('click', function () {
			setTimeout(
				function open(event) {
					document.querySelector('.popup').style.display = 'block';
				},
				100
			)
		});
		document.querySelector('#close').addEventListener('click', function () {
			document.querySelector('.popup').style.display = 'none';
		});
	</script>
</body>

</html>